# -*- coding: utf-8 -*-
# Generated by Django 1.11.29 on 2022-10-26 18:13
from __future__ import unicode_literals

from django.db import migrations
from django.db import models

import kolibri.core.device.models
import kolibri.core.fields
from kolibri.utils.conf import OPTIONS


class Migration(migrations.Migration):

    dependencies = [
        ("device", "0016_osuser"),
    ]

    operations = [
        migrations.AddField(
            model_name="devicesettings",
            name="extra_settings",
            field=kolibri.core.fields.JSONField(
                default={
                    "allow_download_on_mettered_connection": False,
                    "allow_learner_download_resources": False,
                    "enable_automatic_download": True,
                    "limit_for_autodownload": 0,
                    "primary_storage_connection": OPTIONS["Paths"]["CONTENT_DIR"],
                    "secondary_storage_connections": [],
                    "set_limit_for_autodownload": False,
                },
                validators=[
                    kolibri.core.device.models.JSON_Schema_Validator(
                        {
                            "properties": {
                                "allow_download_on_mettered_connection": {
                                    "default": False,
                                    "type": "boolean",
                                },
                                "allow_learner_download_resources": {
                                    "default": False,
                                    "type": "boolean",
                                },
                                "enable_automatic_download": {
                                    "default": True,
                                    "type": "boolean",
                                },
                                "limit_for_autodownload": {
                                    "default": 0,
                                    "type": "integer",
                                },
                                "primary_storage_connection": {
                                    "default": OPTIONS["Paths"]["CONTENT_DIR"],
                                    "type": "string",
                                },
                                "secondary_storage_connections": {
                                    "default": [],
                                    "items": {"type": "string"},
                                    "type": "array",
                                },
                                "set_limit_for_autodownload": {
                                    "default": False,
                                    "type": "boolean",
                                },
                            },
                            "type": "object",
                        }
                    )
                ],
            ),
        ),
    ]
